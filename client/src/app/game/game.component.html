<h2>Hanabi</h2>
<div *ngIf="logic; else gameLoading">
  <p class="tokens">
    <span class="note">Note tokens: <strong>{{logic.noteTokens}}</strong></span><br />
    <span class="storm">Storm tokens: <strong>{{logic.stormTokens}}</strong></span>
  </p>
  <div class="w-100 d-flex flex-row players">
    <div *ngFor="let player of logic.players" class="flex-grow-1" [class.active]="player === logic.activePlayer">
      <h3>{{player.name}}</h3>
      <p>Cards:</p>
      <ul>
        <li *ngFor="let card of player.cards" class="d-flex flex-row justify-content-center align-items-center card"
          [class]="getCardBackgroundClass(player, card)">
          <ng-container *ngIf="player === logic.activePlayer; else otherPlayersContent">
            <strong class="description">Card</strong>
            <button class="btn btn-sm btn-light action" (click)="player.discardCard(card)">Discard</button>
            <button class="btn btn-sm btn-light action" (click)="player.playCard(card)">Play</button>
          </ng-container>

          <ng-template #otherPlayersContent>
            <strong class="description">{{card.color}} {{card.number}}</strong>

            <button class="btn btn-sm btn-light action" *ngIf="!isColorful(card.color); else allColorActions"
              (click)="logic.activePlayer.giveHint(player, card, card.color)">Hint color {{card.color}}</button>
            <ng-template #allColorActions>
              <button class="btn btn-sm btn-light action" *ngFor="let color of allSingleColors"
                (click)="logic.activePlayer.giveHint(player, card, color)">Hint {{color}}</button>
            </ng-template>
            <button class="btn btn-sm btn-light action"
              (click)="logic.activePlayer.giveHint(player, card, card.number)">Hint
              number
              {{card.number}}</button>
          </ng-template>
        </li>
      </ul>
    </div>
  </div>
</div>
<ng-template #gameLoading>
  <h1>Loading...</h1>
</ng-template>