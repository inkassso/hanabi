<ng-container *ngIf="player; else loading">
  <h3>{{player.name }}</h3>
  <div class="d-flex flex-column clearfix hand">
    <div *ngFor="let card of player.cards" class="card-wrapper">
      <app-card [card]="isActive ? undefined : card" [ngbPopover]="popContent" [popoverTitle]="popTitle"
        popoverClass="w-200 shadow">
      </app-card>
      <ng-template #popTitle>
        <div class="d-flex justify-content-around align-items-center">
          <span>{{ isActive ? 'Your card' : 'Give Hint' }}</span>
        </div>
      </ng-template>
      <ng-template #popContent>
        <div class="d-flex flex-row justify-content-around align-items-center">
          <ng-container *ngIf="isActive; else otherPlayersContent">
            <button class="btn btn-sm btn-light action" (click)="player.playCard(card)">Play</button>
            <button class="btn btn-sm btn-secondary action" (click)="player.discardCard(card)">Discard</button>
          </ng-container>

          <ng-template #otherPlayersContent>
            <button class="btn btn-sm btn-primary action" *ngIf="!isColorful(card.color); else allColorActions"
              [class]="getButtonClass(card.color)" (click)="notifyGiveHintRequest(card, card.color)">
              Color {{card.color}}
            </button>
            <ng-template #allColorActions>
              <div class="d-flex flex-column">
                <button *ngFor="let color of allSingleColors" class="btn btn-sm btn-primary action"
                  [class]="getButtonClass(color)" (click)="notifyGiveHintRequest(card, color)">
                  Color {{color}}
                </button>
              </div>
            </ng-template>
            <button class="btn btn-sm btn-secondary action" (click)="notifyGiveHintRequest(card, card.number)">
              Number {{card.number}}
            </button>
          </ng-template>
        </div>
      </ng-template>
    </div>
  </div>
</ng-container>
<ng-template #loading>
  <span class="fs-4">Loading...</span>
</ng-template>