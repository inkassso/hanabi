@use '../card/card'

\:host
  display: block

$cards-in-hand: 4
$card-offset-x: 2
$card-offset-y: 0

.hand
  perspective: 40rem // for the 3D effect
  height: card.$card-height + ($cards-in-hand - 1) * $card-offset-y
  min-width: #{card.$card-width * 1.64 + $cards-in-hand * $card-offset-x}

@keyframes slideLeft
  100%
    transform: translateX(-20%)

@keyframes moveFront
  50%
    z-index: 0
  100%
    z-index: 100

.card-wrapper
  position: absolute
  transition: all ease 300ms // animates transform (translation/rotation) and left (when a card is removed)

  @for $i from 0 to ($cards-in-hand + 1)  // there is an additional card when playing/discarding (new animated in while the old aniamted out)
    &:nth-child(#{$i + 1})
      left: #{$card-offset-x * $i}rem
      top: #{$card-offset-y * $i}rem

  &:hover ~ *   // selector for all subsequent siblings
    transform: translateX(64%) rotateY(30deg)

  &.flipped
    // play both animations in parallel
    // - slide left and right
    //   the keyframes only slide left, but the animation is immediately played backwards
    // - move to front
    //   increases z-index to render above other cards AND keeps the property after animation finishes
    animation: slideLeft 300ms ease 0ms 2 alternate, moveFront 300ms linear 0ms 1 normal forwards

.action
  margin: 0.2rem
